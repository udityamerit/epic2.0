{% extends "base.html" %}

{% block content %}
<div class="container" style="margin-top: 50px; padding-bottom: 50px;">
    <div style="text-align: center; margin-bottom: 40px;">
        <h1 style="color: #2c3e50;">Recommended Medicines</h1>
        <p style="font-size: 1.2em; color: #7f8c8d;">
            Showing medicines for conditions associated with: 
            <span style="background: #e67e22; color: white; padding: 5px 10px; border-radius: 5px;">{{ original_query }}</span>
        </p>
        <a href="{{ url_for('recommender_page') }}" style="display: inline-block; margin-top: 10px; text-decoration: none; color: #3498db; border: 1px solid #3498db; padding: 5px 15px; border-radius: 20px;">
            &larr; Back to Search
        </a>
    </div>

    <div class="row" style="display: flex; flex-wrap: wrap; gap: 20px; justify-content: center;">
        {% for med in medicines %}
        <div class="card" style="width: 300px; border: 1px solid #eee; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); background: white; overflow: hidden; transition: transform 0.2s;">
            <div style="background: #ecf0f1; padding: 15px; border-bottom: 1px solid #eee;">
                <h3 style="margin: 0; color: #2c3e50; font-size: 1.1em;">{{ med.name }}</h3>
                <span style="font-size: 0.8em; color: #e67e22; font-weight: bold;">{{ med.age_group }}</span>
            </div>
            <div style="padding: 15px;">
                <p style="color: #7f8c8d; font-size: 0.9em; height: 60px; overflow: hidden;">{{ med.description }}</p>
                <hr style="border: 0; border-top: 1px solid #eee; margin: 10px 0;">
                <p style="font-size: 0.85em; color: #34495e;"><strong>Used For:</strong> {{ med.reason }}</p>
                
                <button type="button" onclick="document.getElementById('sub-{{ loop.index }}').style.display = document.getElementById('sub-{{ loop.index }}').style.display === 'none' ? 'block' : 'none'" 
                        style="width: 100%; padding: 8px; background: none; border: 1px solid #bdc3c7; color: #7f8c8d; border-radius: 5px; cursor: pointer; margin-top: 10px;">
                    View Substitutes
                </button>
                
                <div id="sub-{{ loop.index }}" style="display: none; margin-top: 10px; background: #f9f9f9; padding: 10px; border-radius: 5px; font-size: 0.85em; color: #555;">
                    {% if med.substitute0 %}{{ med.substitute0 }}{% endif %}
                    {% if med.substitute1 %}, {{ med.substitute1 }}{% endif %}
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<style>
    .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 15px rgba(0,0,0,0.1) !important;
    }
</style>
{% endblock %}